{% extends "layout.html" %}
{% block content %}

	<script type="text/javascript">
	  google.charts.load("current", {packages:['corechart']});
	  google.charts.setOnLoadCallback(drawChart);
	  function drawChart() {
		var data = google.visualization.arrayToDataTable([
		  ["Day", "Revenue", { role: "style" } ],
		  
		  {% for item in lastweek %}		  
		  	["{{ item[1] }}", {{ item[0] }}, ""]
			{% if loop.index < lastweek|length %},{% endif %}
		  {% endfor %}

		]);
  
		var view = new google.visualization.DataView(data);
		view.setColumns([0, 1,
						 { calc: "stringify",
						   sourceColumn: 1,
						   type: "string",
						   role: "annotation" },
						 2]);
  
		var options = {
		  title: "Revnue the last {{ lastweek|length }} days",
		  height: 400,
		  bar: {groupWidth: "95%"},
		  legend: { position: "none" },
		};
		var chart = new google.visualization.ColumnChart(document.getElementById("columnchart_values"));
		chart.draw(view, options);
	}
	</script>
<div class="row"> 
	<form action="/" method="post">
		<div class="form-group">
			<label for="exampleInputEmail1">Number of days</label>
			<input class="form-control" type="text" name="email"></input>
			<input class="btn btn-primary" type="submit" value="Submit"></input>
		</div>
	</form>
</div>

  <div id="columnchart_values" style="width: 100 %; height: 300px;"></div>

<br><br><br><br><br><br>

	<table class="table">
		<tr>
			<th></th>
			<th>This month</th>
			<th>Change</th>
			<th>Last month</th>
		</tr>
		<tr>
			<td>Month to date:</td>
			<td>{{ "{:,.2f}".format(monthToDate) }} kr.</td>
			<td>{{ (((monthToDate - previousMonthToDate) / previousMonthToDate)*100)|round(2) }} %</td>
			<td>{{ "{:,.2f}".format(previousMonthToDate) }} kr.</td>
		</tr>
		<tr>
			<td>Last 30 days:</td>
			<td>{{ "{:,.2f}".format(lastThirtyDays) }} kr.</td>
			<td>{{ (((lastThirtyDays - previousLastThirtyDays) / previousLastThirtyDays)*100)|round(2) }} %</td>
			<td>{{ "{:,.2f}".format(previousLastThirtyDays) }} kr.</td>
		</tr>
	</table>

{% endblock content %}